# React Native V2EX

[![js-standard-style](https://img.shields.io/badge/code_style-standard-brightgreen.svg)](https://github.com/feross/standard)
[![license][license-image]][repository-url]
[![GitHub last commit][last-commit-image]][repository-url]
[![GitHub commit activity][commit-activity-image]][repository-url]
[![action][ci-image]][ci-url]
[![Release Date][rle-image]][rle-url]

[down-latest-image]: https://img.shields.io/github/downloads/funnyzak/react-native-v2ex/latest/total.svg
[down-total-image]: https://img.shields.io/github/downloads/funnyzak/react-native-v2ex/total.svg
[commit-activity-image]: https://img.shields.io/github/commit-activity/m/funnyzak/react-native-v2ex?style=flat-square
[last-commit-image]: https://img.shields.io/github/last-commit/funnyzak/react-native-v2ex?style=flat-square
[license-image]: https://img.shields.io/github/license/funnyzak/react-native-v2ex.svg?style=flat-square
[repository-url]: https://github.com/funnyzak/react-native-v2ex
[rle-url]: https://github.com/funnyzak/react-native-v2ex/releases/latest
[rle-all-url]: https://github.com/funnyzak/react-native-v2ex/releases
[ci-image]: https://img.shields.io/github/workflow/status/funnyzak/react-native-v2ex/react-native-android-build-apk
[ci-url]: https://github.com/funnyzak/react-native-v2ex/actions
[rle-image]: https://img.shields.io/github/release-date/funnyzak/react-native-v2ex.svg

è¿™ä¸ªé¡¹ç›®ä½¿ç”¨äº† React Native æ„å»ºäº†ä¸€ä¸ª [V2EX](https://v2ex.com) ç§»åŠ¨å®¢æˆ·ç«¯åº”ç”¨ã€‚ç›®çš„æ˜¯ä¸ºäº†æ„å»ºä¸€ä¸ª React Native å¿«é€Ÿå¼€å‘è„šæ‰‹æ¶ã€‚å®¢æˆ·ç«¯æ•°æ®åŸºäº [V2EX](https://v2ex.com) å¼€æ”¾ APIã€‚

## å‘å¸ƒ

- [Android APK](https://github.com/funnyzak/react-native-v2ex/releases/latest)
- [iOS Testflight](https://testflight.apple.com/join/7UnGRzH1)

**æœ€è¿‘åœ¨è®¾è®¡å…¨æ–° UI äº¤äº’ï¼ŒåŠŸèƒ½ä¸Šæš‚æ—¶ä¸ä¼šç»§ç»­å¢åŠ ã€‚æ•¬è¯·æœŸå¾…å…³æ³¨ã€‚ğŸ˜**

## TODO

- [x] æ•´ä½“è§„åˆ’ï¼Œé‡æ–°è®¾è®¡åŠŸèƒ½æ¶æ„
- [ ] è§„åˆ’é‡æ–°è®¾è®¡ UI äº¤äº’
- [ ] ç•Œé¢è¯­è¨€æ–‡æ¡ˆä¿®æ­£
- [ ] é¡µé¢åŠŸèƒ½ç»„ä»¶æŠ½ç¦»ï¼Œæé«˜é¡¹ç›®å¤ç”¨æ€§
- [ ] æ•´ç†é¡¹ç›®æ‰€ä½¿ç”¨å¼€æºåº“
- [x] å‘å¸ƒ Testflight ç‰ˆ
- [ ] è¯„è®ºåˆ—è¡¨
- [x] èŠ‚ç‚¹æ¨¡å—
- [ ] å‡çº§æé†’
- [ ] é€šçŸ¥æ¨¡å—
- [ ] ä¸Šæ¶ App Storeã€Google Play
- [ ] é€šè¿‡ cheerioï¼Œè·å–æ›´å¤šçš„æ•°æ®ï¼Œå¼€å‘äº¤äº’åŠŸèƒ½

## ç‰¹ç‚¹

1. åŸºäº React Native 0.67.2 ç‰ˆæœ¬ã€‚
2. å¼•å…¥ TypeScript å¼ºç±»å‹æ£€æŸ¥ï¼Œä¿è¯ç»´æŠ¤æ€§ã€å¯è¯»æ€§ã€ç¨³å®šæ€§ã€‚
3. eslint ä»£ç è§„èŒƒæ£€æŸ¥ï¼Œprettier ä»£ç ç¾åŒ–ã€Husky ä½œä¸º git hooks è¿›è¡Œä»£ç æ ¼å¼åŒ–ã€è§„èŒƒæ ¡éªŒã€‚
4. i18n é›†æˆï¼Œæ”¯æŒå¤šå›½è¯­è¨€ã€‚å®ç°äº†è¯­è¨€åˆ‡æ¢åŠŸèƒ½ã€‚
5. å®ç° APP ä¸»é¢˜ï¼ˆæµ…è‰²ã€æ·±è‰²ã€è‡ªåŠ¨åˆ‡æ¢ï¼‰åˆ‡æ¢åŠŸèƒ½ã€‚
6. ä½¿ç”¨ Reduxï¼Œå¼‚æ­¥ç”¨ Redux Thunkï¼Œå¹¶ç”¨ Redux Persist æ•°æ®æŒä¹…åŒ–ã€‚
7. ä½¿ç”¨ **@redux-devtools/extension** è¿›è¡Œ Redux è°ƒè¯•ã€‚
8. è·¯ç”±ä½¿ç”¨ React Navgiationï¼Œå¹¶ä½¿ç”¨äº† Stack Navigatorã€ Bottom Tabs Navigatorã€ Material Top Tabs Navigatorã€‚
9. ä½¿ç”¨ **[react-native-splash-screen](https://github.com/crazycodeboy/react-native-splash-screen)** æ§åˆ¶å¼€å±å›¾ã€‚
10. Toast åŒæ—¶é›†æˆäº† [react-native-easy-toast](https://github.com/crazycodeboy/react-native-easy-toast#api)ã€[react-native-toast-message](https://github.com/calintamas/react-native-toast-message)ã€‚
11. æ—¥æœŸæ ¼å¼åŒ–ä½¿ç”¨ [dayjs](https://dayjs.gitee.io/docs/zh-CN/installation/typescript)ã€‚
12. WebView ä½¿ç”¨ [react-native-webview](https://github.com/react-native-webview/react-native-webview)ã€‚

## é¢„è§ˆ

### iOS

![preview](https://raw.githubusercontent.com/funnyzak/react-native-v2ex/develop/_docs/assets/screenshot/iOS/preview.png)

### Android

![preview](https://raw.githubusercontent.com/funnyzak/react-native-v2ex/develop/_docs/assets/screenshot/Android/preview.png)

## ç¯å¢ƒ

åœ¨ MacOS ä¸‹å¼€å‘ï¼Œåœ¨ iOS ä¸º 13+ çš„ iPhone Simulator/iPhone 12ã€Android 9.0 çš„ AVD æ¨¡æ‹Ÿå™¨/Mi Phone å‡ç¼–è¯‘æˆåŠŸè¿è¡Œã€‚

å¿…é¡»å®‰è£… NodeJS(16.0+)ã€Yarnã€[Watchman](https://reactnative.cn/docs/environment-setup)ã€‚

- iOSï¼š[CocoaPods](https://reactnative.cn/docs/environment-setup)ã€Xcodeã€iOS Simulatorã€‚
- Androidï¼šJava JDKã€Android Studioã€Gradleã€Android SDKã€[Android Home é…ç½®](https://reactnative.cn/docs/environment-setup)ã€[Android çœŸæœº](https://reactnative.cn/docs/running-on-device) æˆ– [Android AVD](https://developer.android.com/studio/run/managing-avds)ï¼ˆå»ºè®®ç”¨çœŸæœºï¼‰ã€‚

å…·ä½“å¯æ ¹æ®å®˜ç½‘è¿›è¡Œ React Native å¼€å‘ç¯å¢ƒå’Œ iOSã€Android è¿è¡Œç¯å¢ƒçš„é…ç½®ã€‚

å‚è€ƒ[è¿™é‡Œ](https://reactnative.dev/docs/environment-setup)ã€‚

å…³äºè°ƒè¯•å¯ä»¥å®‰è£…å¦‚ä¸‹å·¥å…·ï¼š

- Flipper
- react-devtools
- React Native Debugger
- Google Chrome

## å¯åŠ¨

```bash

# clone repos
$ git clone https://github.com/funnyzak/react-native-v2ex.git && cd react-native-v2ex

# deps install
$ yarn

# ios build
npx pod-install

# start react-native-debuggerï¼ˆonly macï¼‰
yarn debug

# debug https://reactnative.cn/docs/debugging
npx react-devtools

# iOS simulator start
yarn ios

# Android simulator start
yarn android

# print rn info
npx react-native info

# upgrade rn version
npx react-native upgrade

# iOS debug info start
npx react-native run-ios --verbose

# iOS release build
npx react-native run-ios --configuration Release

# Android debug info start
npx react-native run-android --verbose

# Testing the release build
npx react-native run-android --variant=release

# build android release apk
cd android
# aab file
./gradlew bundleRelease
# apk file
./gradlew assembleRelease

```

## ç›®å½•

```plain
â”œâ”€â”€ src                      # æºç ç›®å½•
â”‚   â”œâ”€â”€ App.tsx              # appæ ¹ç»„ä»¶
â”‚   â”œâ”€â”€ actions              # actions
â”‚   â”œâ”€â”€ assets               # é™æ€èµ„æº
â”‚   â”œâ”€â”€ components           # ç»„ä»¶
â”‚   â”œâ”€â”€ config               # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ helper               # åº”ç”¨æœåŠ¡ç±»
â”‚   â”œâ”€â”€ hooks                # é’©å­
â”‚   â”œâ”€â”€ i18n                 # å¤šè¯­è¨€æ”¯æŒ
â”‚   â”œâ”€â”€ navigation           # è·¯ç”±å¯¼èˆª
â”‚   â”œâ”€â”€ reducers             # reducers
â”‚   â”œâ”€â”€ store                # store
â”‚   â”œâ”€â”€ theme                # ä¸»é¢˜
â”‚   â”œâ”€â”€ types                # ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ utils                # å·¥å…·ç±»
â”‚   â””â”€â”€ v2ex                 # appç½‘ç»œåº“
â”œâ”€â”€ .buckconfig              # buckçš„é…ç½®æ–‡ä»¶ï¼Œbuckæ˜¯Facebookå¼€æºçš„é«˜æ•ˆç¼–è¯‘ç³»ç»Ÿ
â”œâ”€â”€ .editorconfig            # ç¼–è¾‘å™¨é…ç½®
â”œâ”€â”€ .eslintrc.js             # eslintçš„é…ç½®æ–‡ä»¶
â”œâ”€â”€ .gitignore               # é…ç½®gitæäº¤éœ€è¦å¿½ç•¥çš„æ–‡ä»¶
â”œâ”€â”€ .husky                   # gité’©å­é…ç½®
â”œâ”€â”€ .prettierrc.js           # ä»£ç æ ¼å¼åŒ–è§„åˆ™
â”œâ”€â”€ .watchmanconfig          # Watchmançš„é…ç½®æ–‡ä»¶ï¼Œç”¨äºç›‘æ§bugæ–‡ä»¶å’Œæ–‡ä»¶å˜åŒ–ï¼Œå¹¶ä¸”å¯ä»¥å‡ºå‘æŒ‡å®šçš„æ“ä½œ
â”œâ”€â”€ __tests__                # æµ‹è¯•
â”œâ”€â”€ android                  # Androidæ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼ŒåŒ…å«AndroidStudioé¡¹ç›®ç¯å¢ƒæ–‡ä»¶ï¼›
â”œâ”€â”€ app.json                 #
â”œâ”€â”€ babel.config.js          # Babelçš„é…ç½®æ–‡ä»¶
â”œâ”€â”€ global.d.ts              # tså…¨å±€å£°æ˜æ–‡ä»¶
â”œâ”€â”€ index.js                 # ç¨‹åºå…¥å£æ–‡ä»¶
â”œâ”€â”€ ios                      # iOSæ–‡ä»¶æ‰€åœ¨ç›®å½•ï¼ŒåŒ…å«XCodeé¡¹ç›®ç¯å¢ƒï¼›
â”œâ”€â”€ metro.config.js
â”œâ”€â”€ package.json             # é¡¹ç›®åŸºæœ¬ä¿¡æ¯ï¼ˆæ¯”å¦‚åç§°ã€ç‰ˆæœ¬ã€è®¸å¯è¯ç­‰å…ƒæ•°æ®ï¼‰ä»¥åŠä¾èµ–ä¿¡æ¯ï¼ˆnpm installå®‰è£…çš„æ¨¡å—ï¼‰ç­‰
â”œâ”€â”€ tsconfig.json            # typescriptç¼–è¯‘é…ç½®æ–‡ä»¶
â””â”€â”€ yarn.lock                # ä¾èµ–ç‰ˆæœ¬é”å®šæ–‡ä»¶
```

## è´¡çŒ®

å¦‚æœä½ æœ‰ä»»ä½•çš„æƒ³æ³•æˆ–è€…æ„è§ï¼Œæ¬¢è¿æ Issue æˆ–è€… PRã€‚

<a href="https://github.com/funnyzak/react-native-v2ex/graphs/contributors">
  <img src="https://contrib.rocks/image?repo=funnyzak/react-native-v2ex" />
</a>

## è°ƒè¯•

### iOS è°ƒè¯•

> å¯ä»¥é€šè¿‡æ‘‡æ™ƒè®¾å¤‡æˆ–æ˜¯é€‰æ‹© iOS æ¨¡æ‹Ÿå™¨çš„"Hardware"èœå•ä¸­çš„"Shake Gesture"é€‰é¡¹æ¥æ‰“å¼€å¼€å‘èœå•ã€‚å¦å¤–ï¼Œå¦‚æœæ˜¯åœ¨ iOS æ¨¡æ‹Ÿå™¨ä¸­è¿è¡Œï¼Œè¿˜å¯ä»¥æŒ‰ä¸‹ CommandâŒ˜ + D å¿«æ·é”®ï¼ŒAndroid æ¨¡æ‹Ÿå™¨å¯¹åº”çš„åˆ™æ˜¯ CommandâŒ˜ + Mï¼ˆwindows ä¸Šå¯èƒ½æ˜¯ F1 æˆ–è€… F2ï¼‰ï¼Œæˆ–æ˜¯ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œ adb shell input keyevent 82 æ¥å‘é€èœå•é”®å‘½ä»¤ã€‚

ä½¿ç”¨ **[Flipper](https://fbflipper.com/docs/getting-started/index/)** è°ƒè¯•ã€‚

ä½¿ç”¨ **[react-devtools](https://www.npmjs.com/package/react-devtools)**ã€‚

### react-native-debugger è°ƒè¯•

1. å®‰è£… **[react-native-debugger](https://github.com/jhen0409/react-native-debugger)**ï¼›
2. `yarn debug` å¯åŠ¨ react-native-debuggerã€‚
3. å¯åŠ¨æ¨¡æ‹Ÿå™¨ `yarn ios`ï¼Œåœ¨æ¨¡æ‹Ÿå™¨æ‰“å¼€ debug remote é€‰é¡¹ï¼›

## å¸¸è§é—®é¢˜

1.  **Invariant Violation: Module AppRegistry is not a registered callable module**

        remove app from the emulator
        npm cache clean --force
        watchman watch-del-all
        cd ios
        pod update / pod install
        cd ..
        npx react-native run-ios

    [https://stackoverflow.com/questions/64768328/invariant-violation-module-appregistry-is-not-a-registered-callable-module-cal](https://stackoverflow.com/questions/64768328/invariant-violation-module-appregistry-is-not-a-registered-callable-module-cal)

2.  **RCTBridge required dispatch_sync to load RNGestureHandlerModule**

    > [https://github.com/software-mansion/react-native-gesture-handler/issues/722](https://github.com/software-mansion/react-native-gesture-handler/issues/722)

3.  **xcode ç¼–è¯‘æŠ¥é”™**

        # åˆ é™¤ç¼–è¯‘ç¼“å­˜
        rm -rf ~/Library/Developer/Xcode/DerivedData

4.  Android ç¼–è¯‘å¯åŠ¨æ³¨æ„

    æ³¨æ„ gradle å’Œ java sdk(java home)çš„ç‰ˆæœ¬å¯¹åº”ï¼Œå¯åœ¨ ./android/gradle.properties è®¾ç½® org.gradle.java.home

5.  å¼€å±å›¾çš„è®¾ç½® iOS ä½¿ç”¨ LaunchScreen.storyboardï¼Œä½¿ç”¨ Xcode ä¿®æ”¹å³å¯ã€‚
6.  ä¿®æ”¹ bundle name [çœ‹è¿™é‡Œ](https://stackoverflow.com/questions/37389905/change-package-name-for-android-in-react-native)ã€‚

## å¼€æºåº“

- eslint
- lodash
- redux
- react-native-safe-area-context
- react-native-render-html
- react-navigation
- react-devtools
- @redux-devtools/extension
- react-native-webview
- async-storage
- react-native-gesture-handler
- react-native-fast-image
- react-native-reanimated
- react-native-localize
- react-native-device-info
- react-native-webview
- prettier

## å‚è€ƒ

- [enviroment setup](https://reactnative.dev/docs/environment-setup)
- [running on device](https://reactnative.dev/docs/running-on-device)
- [debugging](https://twitter.com/i/spaces/1YqJDqDpqzAxV)
- [react native typescript](https://reactnative.dev/docs/typescript)
- [react native cn](https://reactnative.cn/)
- [react-devtools](https://www.npmjs.com/package/react-devtools)
- [fetch](https://reactnative.cn/docs/network)
- [bundle tool](https://developer.android.google.cn/studio/command-line/bundletool)
- [android build](https://reactnative.cn/docs/signed-apk-android)
- [watchman](https://facebook.github.io/watchman/docs/cli-options.html)
- [EsLint](https://eslint.org/docs/user-guide/configuring/)
- [eslintignore-file](https://eslint.org/docs/user-guide/configuring/ignoring-code#the-eslintignore-file)
- [TSconfig](https://www.typescriptlang.org/tsconfig/)
- [npmrc](https://docs.npmjs.com/cli/v7/configuring-npm/npmrc)
- [gitignore](https://git-scm.com/docs/gitignore)
- [prettier](https://prettier.io/docs/en/index.html)
- [v2ex api 2.0](https://v2ex.com/help/api)
- [v2ex api](https://www.v2ex.com/p/7v9TEc53)
- [v2ex token](https://www.v2ex.com/settings/tokens)
- [react native sample](https://github.com/facebook/react-native)
- [react native typescript sample](https://github.com/react-native-community/react-native-template-typescript) |

## License

MIT License Â© 2022 [funnyzak](https://github.com/funnyzak)
